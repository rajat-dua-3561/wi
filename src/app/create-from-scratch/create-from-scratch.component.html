<div class="work-instruction-container">
  <!-- Header/Navigation -->
  <div class="header">
    <button class="back-button" (click)="goBack()">
      <i class="fas fa-arrow-left"></i> Back
    </button>
    
    <div class="steps">
      <div class="step active">
        <span class="step-number">1</span>
        <span class="step-name">Work Instruction Details</span>
      </div>
      <div class="step">
        <span class="step-number">2</span>
        <span class="step-name">Smart Steps</span>
      </div>
      <div class="step">
        <span class="step-number">3</span>
        <span class="step-name">PDF Setup</span>
      </div>
    </div>
  </div>

  <div class="work-instruction-content">
    <div class="title-bar">
      <h1>Work Instruction Details</h1>
      <div class="actions">
        <span class="saved-indicator">All Changes Saved</span>
        <button class="proceed-button" (click)="proceed()">Proceed</button>
        <button class="more-options">
          <i class="fas fa-ellipsis-h"></i>
        </button>
      </div>
    </div>

    <div class="form-content">
      <div class="left-column">
        <!-- Overview Section -->
        <div class="form-container overview-container">
          <h2>Overview</h2>
          
          <div class="form-field">
            <label for="title">Title <span class="required">*</span></label>
            <input type="text" id="title" placeholder="Enter" [(ngModel)]="workInstructionTitle">
          </div>
          
          <div class="form-field">
            <label for="description">Description</label>
            <input type="text" id="description" placeholder="Enter" [(ngModel)]="description">
          </div>

          <div class="form-row">
            <div class="form-field">
              <label for="plant">Plant <span class="required">*</span></label>
              <div class="select-wrapper">
                <select id="plant" [(ngModel)]="selectedPlant">
                  <option value="" disabled selected>Select</option>
                  <option *ngFor="let plant of plants" [value]="plant.id">{{plant.name}}</option>
                </select>
              </div>
            </div>

            <div class="form-field">
              <label for="unit">Unit</label>
              <div class="select-wrapper">
                <select id="unit" [(ngModel)]="selectedUnit">
                  <option value="" disabled selected>Select</option>
                  <option *ngFor="let unit of units" [value]="unit.id">{{unit.name}}</option>
                </select>
              </div>
            </div>

            <div class="form-field">
              <label for="location">Location</label>
              <div class="select-wrapper">
                <select id="location" [(ngModel)]="selectedLocation">
                  <option value="" disabled selected>Select</option>
                  <option *ngFor="let location of locations" [value]="location.id">{{location.name}}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-field">
              <label for="assetClass">Asset Class</label>
              <div class="select-wrapper">
                <select id="assetClass" [(ngModel)]="selectedAssetClass">
                  <option value="" disabled selected>Select</option>
                  <option *ngFor="let assetClass of assetClasses" [value]="assetClass.id">{{assetClass.name}}</option>
                </select>
              </div>
            </div>

            <div class="form-field">
              <label for="asset">Asset</label>
              <div class="select-wrapper">
                <select id="asset" [(ngModel)]="selectedAsset">
                  <option value="" disabled selected>Select</option>
                  <option *ngFor="let asset of assets" [value]="asset.id">{{asset.name}}</option>
                </select>
              </div>
            </div>

            <div class="form-field">
              <label for="category">Category <span class="required">*</span></label>
              <div class="select-wrapper">
                <select id="category" [(ngModel)]="selectedCategory">
                  <option value="" disabled selected>Operation</option>
                  <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-field">
            <label for="tags">Tags</label>
            <div class="tags-input">
              <div class="tag" *ngFor="let tag of tagsList; let i = index">
                {{ tag }}
                <button class="remove-tag" (click)="removeTag(i)">×</button>
              </div>
              <input type="text" id="tagInput" placeholder="Select" 
                     (keydown.enter)="addTag($event)" 
                     [(ngModel)]="tagInput">
            </div>
          </div>

          <div class="form-field">
            <label for="primaryLanguage">Primary Language <span class="required">*</span></label>
            <div class="select-wrapper">
              <select id="primaryLanguage" [(ngModel)]="selectedLanguage">
                <option value="" disabled selected>Select</option>
                <option *ngFor="let language of languages" [value]="language.id">{{language.name}}</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Prerequisites Section -->
        <div class="form-container prerequisites-container">
          <h2>Prerequisites</h2>
          
          <div class="form-field">
            <label for="tools">Tools</label>
            <div class="tags-input">
              <div class="tag" *ngFor="let tool of toolsList; let i = index">
                {{ tool }}
                <button class="remove-tag" (click)="removeTool(i)">×</button>
              </div>
              <input type="text" id="toolInput" placeholder="Select" 
                     (keydown.enter)="addTool($event)" 
                     [(ngModel)]="toolInput">
            </div>
          </div>
          
          <div class="form-field">
            <label for="safetyPPEs">Safety & PPEs</label>
            <div class="tags-input">
              <div class="tag" *ngFor="let item of safetyList; let i = index">
                {{ item }}
                <button class="remove-tag" (click)="removeSafety(i)">×</button>
              </div>
              <input type="text" id="safetyInput" placeholder="Select" 
                     (keydown.enter)="addSafety($event)" 
                     [(ngModel)]="safetyInput">
            </div>
          </div>
        </div>

        <!-- Additional Details Section -->
        <div class="form-container additional-details-container">
          <div class="section-header">
            <h2>Additional Details</h2>
            <button class="add-button" (click)="addDetail()">Add</button>
          </div>
          <p class="section-description">Add relevant details like Line Number, Department, or other context-specific information.</p>
          
          <div class="detail-row" *ngFor="let detail of additionalDetails; let i = index">
            <div class="form-field">
              <label>Label</label>
              <input type="text" placeholder="e.g., &quot;Line&quot;" [(ngModel)]="detail.label">
            </div>
            <div class="form-field">
              <label>Value</label>
              <input type="text" placeholder="e.g., &quot;SG04/SG05&quot;" [(ngModel)]="detail.value">
            </div>
            <button class="remove-detail" (click)="removeDetail(i)">×</button>
          </div>
        </div>
      </div>
      
      <div class="right-column">
        <!-- Thumbnail Section -->
        <div class="form-container thumbnail-container">
          <h2>Thumbnail</h2>
          <div class="thumbnail-upload" [class.has-image]="thumbnailUrl">
            <input type="file" id="thumbnailUpload" accept="image/jpeg,image/png" 
                  (change)="uploadThumbnail($event)" style="display: none">
            
            <div *ngIf="!thumbnailUrl" class="upload-placeholder">
              <div class="upload-icon">
                <i class="fas fa-cloud-upload-alt"></i>
              </div>
              <img src="Vector.jpg" alt="Default thumbnail" class="default-thumbnail">
              <p>Upload image thumbnail</p>
              <span class="file-info">JPG/PNG max 5MB</span>
              <button class="upload-button" (click)="triggerFileInput()">Upload</button>
            </div>
            
            <div *ngIf="thumbnailUrl" class="thumbnail-preview">
              <img [src]="thumbnailUrl" alt="Thumbnail preview">
              <button class="change-thumbnail" (click)="triggerFileInput()">Change</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Pagination -->
    <div class="pagination">
      <button class="pagination-button prev" disabled>
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="pagination-button next" (click)="proceed()">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div> 